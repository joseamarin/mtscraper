<!doctype html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MT Scraper</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.2/css/bulma.min.css">
  <link rel="stylesheet" href="css/main.css">
</head>
<body id="app">
  <div class="columns">
  <div class="column"></div>
  <div class="column">
    <h1 style="text-align: center; margin-top: 20px; font-weight: 900; font-size: 25px; color: #000;">Email Package Template Builder</h1>
    <hr style="background-color: black;"/>
    <p style="font-size: 20px; line-height: 28px; text-align: center;">
    In order to use this tool, please make sure you are logged into the MT.
    </p>
    <br>
    <br>
    <p style="font-size: 20px; line-height: 28px; text-align: center;">
    To get started, drag the button below to your bookmarks bar. Anytime you need to make packages just hit the button on your bookmarks bar to build the package email. If using Chrome the template should automatically be in your clipboard. For Firefox users you will need to click on the copy button.
    </p>
    <br>
    <br>
    <p style="font-size: 20px; line-height: 28px;text-align: center;">
    Drag the button below to <br/>your bookmarks toolbar.
    <br>
    <br>
    <a class="button is-large is-fullwidth is-success" id="codeOut" href="javascript:(function(a,b){'use strict';function c(a){this.factory=a,this.factory||(this.factory=new e),this.getOfferId=function(a){const b=['Cid','Oid','Oxid'];for(let c;c=b.pop();){let b=this.factory['get'+c+'Strategy']();if(b.isValidContext(a))return b.extractOfferId(a)}}}function d(a,b){this.config={validate:a,extract:b},this.isValidContext=function(a){return this.config.validate(a)},this.extractOfferId=function(a){return this.config.extract(a)}}const e=function(){const a=this;a.getDirector=function(){return new c(a)},a.getCidStrategy=function(){return new d(function(a){const b=a.substring(a.indexOf('Cake Offer ID::')).substring(28),c=null!==b.match(/^[0-9]/g),d=b.match(/^([0-9])(\d+)/g);return c&&b.match(/^[0-9]/g)[0]?c&&1===b.match(/^[0-9]/g)[0].length&&+(0<b.match(/^([0-9])/g)[0]):c&&null!==d[0]&&0<+d[0]},function(a){return 1===a.substring(a.indexOf('Cake Offer ID::')).substring(28).match(/^[0-9](\d+)|^[0-9]/g)[0].length?a.substring(a.indexOf('Cake Offer ID::')).substring(28).match(/^([0-9])/g)[0]:a.substring(a.indexOf('Cake Offer ID::')).substring(28).match(/^([0-9])(\d+)/g)[0]})},a.getOidStrategy=function(){return new d(function(a){const b=a.substring(a.indexOf('?o=')),c=b.match(/\?o=(\d+)([a-zA-Z$!#]+)?&.+/);return null!==c&&0<+c[1]},function(a){return a.substring(a.indexOf('?o=')).match(/\?o=(\d+)([a-zA-Z$!#]+)?&.+/)[1]})},a.getOxidStrategy=function(){return new d(function(a){const b=a.substring(a.indexOf('oxid=')),c=b.match(/\oxid=(\d+)([a-zA-Z$!#]+)?&.+/);return null!==c&&0<c[1]},function(a){return a.substring(a.indexOf('?oxid=')).match(/\oxid=(\d+)([a-zA-Z$!#]+)?&.+/)[1]})}},f=new c;var g=(g=f.getOfferId(b.getElementsByTagName('table')[10].innerHTML))?f.getOfferId(b.getElementsByTagName('table')[10].innerHTML):'Cake Offer ID Not found';const h=b.getElementsByTagName('input')[3].attributes.value.nodeValue,i=a=>a.replace(/\(Active - A - AA \)/g,'').replace(/\(Active - O - AA \)/g,'').replace(/.*\(Active - A - NA! \)/g,'').replace(/^[0-9]{0,}/g,'').replace(/^[0-9]{0,}/g,'').replace(/-/,'').replace(/.*\(Inactive - A - NA! \)/g,'').replace(/.*\(Inactive - A - AA \)/g,''),j=a=>{const b=[];return Array.from(a).forEach(a=>{b.push(i(a.innerText))}),b.join('\n').split('\n').map(function(a){return a.trim()}).filter(function(a){return''!=a}).join('\n')},k=j(b.getElementsByName('csubject')[0]).split('\n').reverse().join('\n').split('\n').map(function(a){return a.trim()}).filter(function(a){return''!=a}).join('\n');const l=j(b.getElementsByName('from')[0]),m=b.getElementsByName('unsub_link')[0].attributes.value.nodeValue,n=a=>(a=a.replace(/ADV/g,h),a=a.replace(/ID/g,g),a=0===k.length?a.replace(/SL/g,'No (Active - A - AA ) or (Active - O - AA ) Subject Lines found'):a.replace(/SL/g,k),a=0===l.length?a.replace(/FL/g,'No (Active - A - AA ) or (Active - O - AA ) From Lines found'):a.replace(/FL/g,l),a=0===m.length?a.replace(/UNSUB/g,'No Advertiser Unsubscribe URL found'):a.replace(/UNSUB/g,m),a),o=b.createElement('textarea');o.classList.add('js-tmp'),o.innerHTML=n('ADV (9) Green and (1397) Pluto C Packages: Setup Assets and Approved\n\nHi Team,\n\nPlease find your offer ADV here listed below and attached:\n\nOffer(s):\n(ID) ADV\n\nAffiliate(s):\nGreen (9)\nPluto C (1397)\n\nCreative(s):\nCreative Name here\n\nSubject Line(s):\nSL\n\nFrom Line(s):\nFL\n\nUnsubscribe URL:\nUNSUB\n\nPreapproval seeds:\nzxtest@zetainteractive.com\n\nThanks.');b.querySelector('.js-tmp');b.querySelector('table').appendChild(o),o.focus(),o.select();const p=()=>{b.body.appendChild(o),o.focus(),o.select();try{b.execCommand('copy')}catch(a){alert('Copy not supported'+a)}finally{b.body.removeChild(o)}},q=navigator.userAgent.toLowerCase();-1<q.indexOf('firefox')?(()=>{const a=b.createElement('div'),c=b.createElement('div'),d=b.createElement('p'),e=b.getElementsByTagName('table')[0],f=b.createElement('button');f.style.backgroundImage='url(https://raw.githubusercontent.com/joseamarin/mtscraper/master/assets/copy.gif)',f.style.position='fixed',f.style.top='50%',f.style.right='50%',f.style.height='25px',f.style.width='55px',f.style.backgroundRepeat='no-repeat',f.style.backgroundSize='cover',e.style.display='none',a.innerText=o.textContent,c.style.backgroundColor='#509C10',d.innerText='Email Package Template',d.style.color='#fff',d.style.fontFamily='Verdana,Arial,Helvetica,sans-serif',d.style.fontSize='13px',d.style.textAlign='center',d.style.fontWeight='bold',d.style.margin=0,a.style.backgroundColor='#E3FAD1',c.appendChild(d),b.body.appendChild(c),b.body.appendChild(a),a.appendChild(f),f.addEventListener('click',()=>{p(),e.style.display='block',b.body.removeChild(a),b.body.removeChild(c),o.style.display='none',f.style.display='none'})})():(()=>{try{b.execCommand('copy')}catch(a){alert('Copy not supported'+a)}finally{b.querySelector('table').removeChild(o)}})()})(this,document);">MT SCRAPER</a>
  </div>
  <div class="column"></div>
</div>
</body>
<html>
